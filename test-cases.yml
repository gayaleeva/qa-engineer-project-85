---
- summary: |
    Успешная регистрация пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites:
    Открыта страница регистрации https://codebattle.hexlet.io/users/new?locale=en&next=%2F
  test-data: |
    Nickname: test_user
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Ввести никнейм в поле Nickname
    - Ввести email в поле Email
    - Ввести пароль в поле Password
    - Ввести пароль в поле Password Confirmation
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно зарегистрирован

- summary: |
    Невозможность авторизации с несуществующими Email 
  requirement: |
    При авторизации с несуществующим Email пользователь не проходит авторизацию
  prerequisites:
    Открыта страница авторизации https://codebattle.hexlet.io/session/new?locale=en&next=%2F
  test-data: |
    Email: test_user@mail.cot
    Password: test_password
  steps:
    - Ввести email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь не прошёл авторизацию, над полем Email появится сообщение об ошибке "EMAIL_NOT_FOUND"
    
- summary: |
    Возможность принять участие в игре без регистрации
  requirement: |
    Неавторизованный пользователь должен иметь возможность принять участвовать в тестовой игре с ботом
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/
  test-data: |
    Нет данных
  steps:
    - Нажимаем на кнопку "TRY SIMPLE BATTLE" 
  expected-result: |
    Игра началась

- summary: |
    Проверка возможности создать игру с соперником-ботом
  requirement: |
    Пользователь должен иметь возможность создать игру с соперником-ботом
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
  expected-result: |
    Началась игра с соперником-ботом

- summary: |
    Проверка возможности присоединиться к созданной другим участником игре
  requirement: |
    Пользователь должен иметь возможность присоединиться к созданной другим участником игре
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Выбрать в списке игр в лобби игру со статусом "waiting_opponent" и нажать кнопку "Fight"
  expected-result: |
    Началась игра с выбранным соперником

- summary: |
    Проверка возможности зайти в запущенную игру в качестве зрителя
  requirement: |
    Пользователь должен иметь возможность зайти в запущенную игру в качестве зрителя
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Выбрать в списке игр в лобби игру со статусом "playing" и нажать кнопку "Show"
  expected-result: |
    Открылась выбранная игра в режиме зрителя

- summary: |
    Проверка возможности посмотреть статистику других игроков
  requirement: |
    Пользователь должен иметь возможность посмотреть статистику других игроков
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать на никнейм любого пользователя в лобби или таблице лидеров
  expected-result: |
    Открылся профиль выбранного пользователя со статистикой его игр

- summary: |
    Проверка возможности создания игры с другом
  requirement: |
    Пользователь должен иметь возможность создать игру с другом
  prerequisites:
    Пользователь "test_user" авторизован в одном браузере, пользователь "test_user2" авторизован во втором браузере
  test-data: |
    Пользователь test_user: 
    Email: test_user@mail.com
    Password: test_password
    Пользователь test_user2: 
    Email: test_user2@mail.com
    Password: test_password2
  steps:
    - В первом браузере нажать кнопку "Create a Game"
    - Выбрать тип игры "With a friend"
    - В поле "Choose opponent" ввести никнейм "test_user2"
    - Нажать кнопку "Create invite"
    - Во втором браузере в лобби нажать на иконку скрещенных мечей
    - В выпавшем окне нажать кнопку "Accept"
  expected-result: |
    Игра с выбранным другом успешно началась

- summary: |
    Проверка проигрыша в случае использования опции "Сдаться"
  requirement: |
    Игра завершается проигрышем, если выбрать опцию "Сдаться"
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Нажать на иконку в виде красного флажка "Give Up"
    - Подтвердить принятие поражения, нажав "Give Up"
  expected-result: |
    Появляется окно, сообщающее о проигрыше, игра завершается победой соперника

- summary: |
    Проверка возможности посмотреть историю игр
  requirement: |
    Пользователь должен иметь возможность посмотреть историю завершенных игр
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку на "Completed games" 
  expected-result: |
    Откроется вкладка с историей последних прошедших игр

- summary: |
    Проверка возможности видеть код соперника в реальном времени
  requirement: |
    Пользователь должен иметь возможность видеть код соперника в реальном времени
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Начать набирать символы в поле кода
  expected-result: |
    Видно поле кода соперника и процесс изменения его кода в реальном времени

- summary: |
    Проверка возможности выбрать язык для текста задачи в игре
  requirement: |
    Пользователь должен иметь возможность выбрать язык для текста задачи в игре - русский или английский
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - В окне с текстом задачи изменить язык на RU
  expected-result: |
    Текст задачи отображается на русском языке

- summary: |
    Проверка возможности общаться с соперником и зрителями в чате
  requirement: |
    Пользователь должен иметь возможность общаться с соперником и зрителями в чате
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Написать любое сообщение в чат
    - Нажать кнопку "Send"
  expected-result: |
    Сообщение отобразилось в чате

- summary: |
    Проверка возможности выбора языка программирования для решения задачи в игре
  requirement: |
    Пользователь должен иметь возможность выбрать язык программирования для решения задачи в игре
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Нажать на выпадающий список выбора языка программирования над полем для ввода кода
    - Выбрать любой язык программирования из предложенных в списке, отличный от текущего
  expected-result: |
    Язык программирования поменялся на выбранный

- summary: |
    Проверка возможности ознакомиться с гайдом по игре во время битвы
  requirement: |
    Пользователь должен иметь возможность ознакомиться с гайдом по игре во время битвы
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Нажать кнопку "Show guide"
  expected-result: |
    Запускается гайд из восьми шагов по функционалу битвы 

- summary: |
    Проверка возможности запустить матч-реванш
  requirement: |
    Пользователь должен иметь возможность запустить матч-реванш
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Нажать на иконку в виде красного флажка "Give Up"
    - Подтвердить принятие поражения, нажав "Give Up"
    - Закрыть окно, сообщающее о проигрыше
    - Нажать кнопку "Rematch"
  expected-result: |
    Началась новая игра с тем же соперником

- summary: |
    Проверка определения победителя
  requirement: |
    Победителем должен назначаться игрок, первым верно выполнивший задачу
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
    
    Решение задачи:
    const _ = require("lodash");
    const R = require("rambda");

    const solution = (width, length) => {
      return width * length;
    };

    module.exports = solution;
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot"
    - Выбрать задачу "rect_area", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Выбрать язык программирования NodeJS
    - Вставить в поле для введения кода решение задачи
    - Нажать кнопку "Check solution"
  expected-result: |
    Появилось всплывающее окно с сообщением о победе

- summary: |
    Проверка возможности сбросить код до первоначального вида
  requirement: |
    Пользователь должен иметь возможность сбросить код до первоначального вида
  prerequisites:
    Открыта главная страница https://codebattle.hexlet.io/#lobby
  test-data: |
    Email: test_user@mail.com
    Password: test_password
  steps:
    - Нажать кнопку "Create a Game"
    - Выбрать тип игры "With a bot", другие параметры оставить по умолчанию
    - Нажать кнопку "Create battle"
    - Ввести любой текст в поле для ввода кода
    - Нажать кнопку "Reset editor"
  expected-result: |
    Код сбросился до первоначального вида

- summary: |
    19
  requirement: |
    .
  prerequisites:
    .
  test-data: |
    .
  steps:
    - 
    - 
  expected-result: |
    .

- summary: |
    20
  requirement: |
    .
  prerequisites:
    .
  test-data: |
    .
  steps:
    - 
    - 
  expected-result: |
    .
